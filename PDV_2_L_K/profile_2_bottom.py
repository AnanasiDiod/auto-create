import ezdxf as dxf
import pylab as p

from point import *


def main(width, heigh, quantity, path=str()):
    doc = dxf.new()
    doc.layers.add("FIGURE", color=2)
    msp = doc.modelspace()
    p = point()
    p.msp = msp

    p.go_arc(2, 5)
    p.go_arc(1, 5)
    p.go_line(78.44, 0)
    p.go_arc(8, 5)
    p.go_arc(7, 5)
    p.go_line(0, -16)
    p.go_arc(6, 5)
    p.go_arc(5, 5)
    p.go_line(-47.1, 0)
    p.set_xy(33.84, -23.5)
    p.go_arc(2, 2.5)
    p.go_arc(1, 2.5)
    p.set_xy(33.84, -23.5)
    p.go_line(221.28, 0)

    p.set_xy(252.62, -21)
    p.go_arc(8, 2.5)
    p.go_arc(7, 2.5)
    p.set_xy(252.62, -21)
    p.go_line(-47.1, 0)
    p.go_arc(4, 5)
    p.go_arc(3, 5)
    p.go_line(0, 16)
    p.go_arc(2, 5)
    p.go_arc(1, 5)
    p.go_line(78.44, 0)
    p.go_arc(8, 5)
    p.go_arc(7, 5)
    p.go_line(0, -446)

    p.go_arc(6, 5)
    p.go_arc(5, 5)
    p.go_line(-78.44, 0)
    p.go_arc(4, 5)
    p.go_arc(3, 5)
    p.go_line(0, 16)
    p.go_arc(2, 5)
    p.go_arc(1, 5)
    p.go_line(47.1, 0)
    p.set_xy(255.12, -422.5)
    p.go_arc(6, 2.5)
    p.go_arc(5, 2.5)
    p.set_xy(255.12, -422.5)
    p.go_line(-221.28, 0)

    p.set_xy(36.34, -425)
    p.go_arc(4, 2.5)
    p.go_arc(3, 2.5)
    p.set_xy(36.34, -425)
    p.go_line(47.1, 0)
    p.go_arc(8, 5)
    p.go_arc(7, 5)
    p.go_line(0, -16)
    p.go_arc(6, 5)
    p.go_arc(5, 5)
    p.go_line(-78.44, 0)
    p.go_arc(4, 5)
    p.go_arc(3, 5)
    p.go_init()

    p.set_xy(15.92, -7.65)
    p.go_arc(3, 4.5)
    p.go_arc(2, 4.5)
    p.go_arc(1, 4.5)
    p.go_arc(8, 4.5)
    p.go_angle(315, 10)
    p.go_arc(7, 4.5)
    p.go_arc(6, 4.5)
    p.go_arc(5, 4.5)
    p.go_arc(4, 4.5)
    p.go_angle(135, 10)

    p.set_xy(266.68, -1.28)
    p.go_arc(1, 4.5)
    p.go_arc(8, 4.5)
    p.go_arc(7, 4.5)
    p.go_arc(6, 4.5)
    p.go_angle(225, 10)
    p.go_arc(5, 4.5)
    p.go_arc(4, 4.5)
    p.go_arc(3, 4.5)
    p.go_arc(2, 4.5)
    p.go_angle(45, 10)

    p.set_xy(259.6, -437.69)
    p.go_arc(3, 4.5)
    p.go_arc(2, 4.5)
    p.go_arc(1, 4.5)
    p.go_arc(8, 4.5)
    p.go_angle(315, 10)
    p.go_arc(7, 4.5)
    p.go_arc(6, 4.5)
    p.go_arc(5, 4.5)
    p.go_arc(4, 4.5)
    p.go_angle(135, 10)

    p.set_xy(22.99, -431.33)
    p.go_arc(1, 4.5)
    p.go_arc(8, 4.5)
    p.go_arc(7, 4.5)
    p.go_arc(6, 4.5)
    p.go_angle(225, 10)
    p.go_arc(5, 4.5)
    p.go_arc(4, 4.5)
    p.go_arc(3, 4.5)
    p.go_arc(2, 4.5)
    p.go_angle(45, 10)

    p.set_xy(0, 0)
    p.circle(51.44, -8, 4.9 / 2)
    p.circle(27, 0, 4.9 / 2)
    p.circle(132.08, 0, 4.9 / 2)
    p.circle(27, 0, 4.9 / 2)
    p.circle(0, -430, 4.9 / 2)
    p.circle(-27, 0, 4.9 / 2)
    p.circle(-132.08, 0, 4.9 / 2)
    p.circle(-27, 0, 4.9 / 2)
    p.circle(21.84, 30.2, 4.9 / 2)
    p.circle(71.2, 0, 4.9 / 2)
    p.circle(71.2, 0, 4.9 / 2)
    p.circle(0, 369.6, 4.9 / 2)
    p.circle(-71.2, 0, 4.9 / 2)
    p.circle(-71.2, 0, 4.9 / 2)

    p.circle(40.5, -33.8, 4.9 / 2)
    p.circle(0, -151, 4.9 / 2)
    p.circle(0, -151, 4.9 / 2)

    #метка
    p.set_xy(283.76, -219.5)
    p.go_line(0, -7)
    p.go_line(0.75, 0)
    p.go_line(0, 3.125)
    p.go_line(2.5, 0)
    p.go_line(0, -3.125)
    p.go_line(0.75, 0)
    p.go_line(0, 7)
    p.go_line(-0.75, 0)
    p.go_line(0, -3.125)
    p.go_line(-2.5, 0)
    p.go_line(0, 3.125)
    p.go_line(-0.75, 0)

    doc.saveas(path+"Профиль 2 низ "+str(width)+'x'+str(heigh) +
               ' 0,8мм ' + str(quantity)+'шт.dxf')

main(200,200,1)